<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Olfactory Data Visualizer</title>
  <!-- <meta name="description" content="Interactive dashboard scaffolding for rabies tracing, double injections, and regional AON datasets." /> -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />

  <!-- AOS Animate on Scroll -->
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />

  <!-- D3 & Vega (for future charts) -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
</head>

<body>
  <!-- Navigation Bar -->
  <nav class="nav">
    <div class="nav__inner">
      <a href="index.html" class="brand">Olfactory DV</a>
      <div class="nav__links">
        <a href="index.html" class="is-active">Datasets</a>
        <a href="upload.html">Upload</a>
        <a href="napari.html">Napari Viewer</a>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <header id="top" class="hero">
    <div class="container hero-shell" data-aos="fade-up">
      <div class="hero-shell__left">
        <p class="kicker">Tisya Sharma · Capstone</p>
        <h1>Olfactory Data Visualizer</h1>
        <p class="lede">
          Dashboard for AON Interhemispheric Connections
          <a class="info-link" href="#footer" aria-label="Jump to footer details">
            <span aria-hidden="true">
              <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="10" cy="10" r="9" stroke="currentColor" stroke-width="1.6"/>
                <path d="M10 9.5v4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                <circle cx="10" cy="6" r="0.9" fill="currentColor"/>
              </svg>
            </span>
          </a>
          <!-- regional AON expression temporarily omitted -->
        </p>
        <div class="legend legend--stacked">
          <div class="legend__item"><span class="dot" style="--c:var(--accent1)"></span><span>Input Mapping: Monosynaptic Rabies Tracing</span></div>
          <div class="legend__item"><span class="dot" style="--c:var(--accent2)"></span><span>Circuit Annatomy: Dual-Viral Tracing</span></div>
          <div class="legend__item"><span class="dot" style="--c:var(--accent3)"></span><span>Molecular Profiling: Single-Cell RNA Sequencing</span></div>
        </div>
      </div>
    </div>
  </header>

  <!-- Datasets Tabs -->
  <section id="datasets" class="section section--alt">
    <div class="container">
      <div class="section__head" data-aos="fade-up">
        <div>
          <p class="kicker">Datasets</p>
          <h3>Explore by Dataset</h3>
          <p class="muted">Switch tabs to see dedicated filters, notes, and chart placeholders for each dataset.</p>
        </div>
      </div>

      <!-- Tabs -->
      <div class="tabs" role="tablist" aria-label="Datasets">
        <button class="tab is-active" role="tab" aria-selected="true" aria-controls="rabiesTab" id="rabiesTabBtn">Rabies Injection</button>
        <button class="tab" role="tab" aria-selected="false" aria-controls="doubleTab" id="doubleTabBtn">Double Injection</button>
        <button class="tab" role="tab" aria-selected="false" aria-controls="scrnaTab" id="scrnaTabBtn">scRNA-seq</button>
      </div>

      <!-- Rabies Tab -->
      <div id="rabiesTab" class="tabpanel is-active" role="tabpanel" aria-labelledby="rabiesTabBtn" data-aos="fade-up">
        <div class="rabies-layout card">
          <aside class="rabies-sidebar">
            <div class="sidebar-block region-dropdown">
              <label class="sidebar-label">Search & Select Regions
                <input id="rabiesRegionSearch" type="search" placeholder="Type to search/add..." autocomplete="off" />
              </label>
              <div id="rabiesRegionList" class="region-list"></div>
              <div class="sidebar-actions">
                <div class="sidebar-actions__buttons">
                  <button id="rabiesResetBtn" class="btn btn--mini btn--ghost" type="button">Reset defaults</button>
                  <button id="rabiesClearBtn" class="btn btn--mini btn--ghost" type="button">Clear</button>
                </div>
              </div>
            </div>
            <div class="sidebar-block">
              <div class="sidebar-label">View mode</div>
              <label class="sidebar-radio"><input type="radio" name="rabiesGroupBy" value="genotype" checked /> Region Signal Averaged </label>
              <label class="sidebar-radio"><input type="radio" name="rabiesGroupBy" value="subject" /> Region Signal Per Mouse </label>
            </div>
          </aside>
          <div class="rabies-main">
            <div class="abstract-plain">
              <div class="abstract-plain__head">
                <div class="abstract-plain__meta">
                  <p class="kicker"><span class="dot" style="--c:var(--accent1)"></span></span>  Input Mapping: Monosynaptic Rabies Tracing</p>
                  <div class="abstract-plain__title-row">
                  </div>
                </div>
                <button id="rabiesAbstractToggle" class="figure-insight__toggle figure-insight__toggle--right" type="button" aria-expanded="false" aria-controls="rabiesAbstractBody">View Experimental Rationale</button>
              </div>
              <div id="rabiesAbstractBody" class="abstract-plain__body" hidden>
                <div class="muted small">
                  <p>
                    To decode the connectivity logic of the Anterior Olfactory Nucleus (AON), we employed Monosynaptic Rabies Tracing. While anterograde tracing confirmed that 
                    interhemispheric projections arise exclusively from excitatory (VGLUT1+) neurons, their postsynaptic impact depends on their targets. By using vGLUT1-Cre and 
                    vGAT-Cre mice as starter populations, this experiment quantifies the synaptic convergence of brain-wide inputs onto specific AON cell types. This reveals whether 
                    long-range inputs (such as those from the contralateral hemisphere, olfactory bulb, or hippocampus) differentially target excitation or inhibition to drive complex 
                    processing like feedforward inhibition or temporal gating.
                <div class="muted small">
                  Virus: EnvA-dG-Rabies | Starters: vGLUT1-Cre, vGAT-Cre | N=<span id="rabiesMouseCount">–</span> mice
                </div>
              </div>
            </div>
            <div class="zoom-controls-row">
              <div class="zoom-controls-group">
                <div class="view-switcher" role="group" aria-label="Select visualization type">
                  <button class="view-switcher__btn is-active" type="button" data-rabies-view="dot">Dot Plot</button>
                  <button class="view-switcher__btn" type="button" data-rabies-view="box">Box Plot</button>
                  <button class="view-switcher__btn" type="button" data-rabies-view="bar">Diverging Bars</button>
                </div>
                <div class="zoom-controls">
                  <span id="zoomLevel" class="zoom-controls__level">1.0x</span>
                  <span class="zoom-controls__divider">|</span>
                  <button id="resetZoomBtn" class="zoom-controls__btn" type="button">Reset</button>
                </div>
              </div>
            </div>
            <div class="figure-head figure-head--center" id="rabiesFigureHead"></div>
            <div class="figure-panel">
              <div class="panel-a">
                <div id="rabiesDotPlotIpsi" class="dotplot-container"></div>
              </div>
            <div class="panel-b">
              <div id="rabiesDotPlotContra" class="dotplot-container"></div>
            </div>
          </div>
          <details class="figure-insight" open>
              <summary>
                <div class="figure-insight__header">
                  <p class="kicker">How to Interpret This Data</p>
                </div>
                <span class="figure-insight__toggle" aria-hidden="true">View Interpretation</span>
              </summary>
              <div class="figure-insight__body">
                <div class="figure-insight__grid">
                  <div class="figure-insight__block">
                    <div class="insight-label">
                      <span class="insight-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                          <rect x="4" y="4" width="16" height="16" rx="3"></rect>
                          <line x1="8" y1="16" x2="8" y2="12"></line>
                          <line x1="12" y1="16" x2="12" y2="10"></line>
                          <line x1="16" y1="16" x2="16" y2="8"></line>
                        </svg>
                      </span>
                      <span>THE METRIC</span>
                    </div>
                  <ul class="insight-text" style="margin:0; padding-left:18px;">
                    <li style="margin-bottom:4px;"><strong>Log10 Scale:</strong> The X-axis uses a Log10 scale normalized to the <strong>Injection Size</strong> (Total Ipsilateral Signal). This accounts for variability in viral uptake between subjects.</li>
                    <li><strong>Magnitude:</strong> A visual distance of one unit represents a <strong>10-fold difference</strong> in connection strength.</li>
                  </ul>
                  </div>
                  <div class="figure-insight__divider" aria-hidden="true"></div>
                  <div class="figure-insight__block">
                    <div class="insight-label">
                      <span class="insight-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 3v4"></path>
                        <path d="M6.8 6.8 9.3 9.3"></path>
                        <path d="M3 12h4"></path>
                        <path d="M6.8 17.2 9.3 14.7"></path>
                        <path d="M12 21v-4"></path>
                        <path d="M17.2 17.2 14.7 14.7"></path>
                        <path d="M21 12h-4"></path>
                        <path d="M17.2 6.8 14.7 9.3"></path>
                        <circle cx="12" cy="12" r="2.6"></circle>
                        </svg>
                  </span>
                    <span>THE SIGNAL: VGLUT1 vs. VGAT</span>
                    </div>
                  <ul class="insight-text" style="margin:0; padding-left:18px;">
                    <li><strong>VGLUT1 (Excitatory):</strong> Primary driver inputs to the circuit.</li>
                    <li><strong>VGAT (Inhibitory):</strong> Gating/control inputs within the circuit.</li>
                  </ul>
                  </div>
                </div>
              <div class="insight-fullrow">
                <div class="insight-label">
                  <span class="insight-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="3" y="5" width="18" height="14" rx="3"></rect>
                      <path d="M8 9h8"></path>
                      <path d="M8 13h5"></path>
                    </svg>
                  </span>
                  <span>PANEL COMPARISON: Ipsilateral vs. Contralateral</span>
                </div>
                  <p class="insight-text"><strong>Ipsilateral:</strong> Shows robust, local inputs from the same hemisphere as the injection. These values are naturally higher due to proximity and the presence of starter cells.<br/><strong>Contralateral:</strong> Shows sparse, long-range projections from the opposite hemisphere. These are the specific interhemispheric connections characterized in this study.</p>
              </div>
              </div>
            </details>
            <div id="rabiesTooltip" class="tooltip" hidden></div>
          </div>
        </div>
      </div>

      <!-- Double Injection Tab -->
      <div id="doubleTab" class="tabpanel" role="tabpanel" aria-labelledby="doubleTabBtn" hidden data-aos="fade-up">
        <div class="viz-holder">
          <div class="viz-holder__title">Dataset visualization</div>
        </div>
      </div>

      <!-- Regional AON Tab -->
      <div id="scrnaTab" class="tabpanel" role="tabpanel" aria-labelledby="scrnaTabBtn" hidden data-aos="fade-up">
        <div class="viz-holder">
          <div class="viz-holder__title">Dataset visualization</div>
        </div>
      </div>
    </div>
  </section>


  <!-- Scripts -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script src="utils.js"></script>
  <script src="datasets.js"></script>
  <script src="rabies.js"></script>
  <script src="main.js"></script>

  <footer class="footer-info" id="footer">
    <div class="container footer-simple">
      <p class="kicker">Methods</p>
      <div class="footer-simple__grid">
        <div class="footer-simple__block">
          <h3>Experimental Rationale</h3>
          <p>
            This dashboard integrates a multi-modal interrogation of the Anterior Olfactory Nucleus (AON). By combining Dual-Viral Mapping (Anatomy), Monosynaptic Rabies Tracing (Connectivity), and snRNA-sequencing (Identity), we characterize the circuit's structural organization and molecular profile. This resource aims to determine how bilateral olfactory information is integrated to drive behaviors like odor localization and memory.
          </p>
        </div>
        <div class="footer-simple__block">
          <h3>Key Findings</h3>
          <ul>
            <li><strong>Anatomy:</strong> Interhemispheric axons originate primarily from the Dorsolateral AON and are exclusively VGLUT1+ (excitatory).</li>
            <li><strong>Connectivity:</strong> Long-range inputs synapse onto both Excitatory and Inhibitory populations, providing a circuit basis for feedforward inhibition.</li>
            <li><strong>Identity:</strong> Transcriptomic profiling identifies 27 distinct clusters, pinpointing markers like Robo2 for commissural neurons.</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-meta">© Tisya Sharma 2025 AON Dashboard Credits to Murthy Laboratory</div>
  </footer>
</body>
</html>
